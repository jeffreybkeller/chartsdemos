<html>
<head>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.0.js" 
    integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="
    crossorigin="anonymous">
  </script>
  <script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawWeightChart);
    google.charts.setOnLoadCallback(drawBloodPressureChart);
            
    function drawWeightChart() { 
      var weightDataTable = new google.visualization.DataTable();
      weightDataTable.addColumn({ type: 'date', id: 'Date' });
      weightDataTable.addColumn({ type: 'number', id: 'Weight', label: "Weight" });
      weightDataTable.addRows([
        [new Date('07/01/2016'),  180],
        [new Date('07/08/2016'),  190],
        [new Date('08/22/2016'),  191],
        [new Date('08/25/2016'),  210]
      ]);
      drawChart("weight", weightDataTable);
      
      var maxY = 0;
      var minX = 999;

      $("#weight g[clip-path] g rect").each(function() {

        // Calculate the maximum y value for horizontal lines, which
        // will be our horizontal axis
        if ($(this).attr("height") == 1 && parseInt($(this).attr("y")) > maxY) {
          maxY = parseInt($(this).attr("y"))
        }
        
        // Calculate the minimum x value for vertical lines, which
        // will be our vertical axis
        if ($(this).attr("width") == 1 && parseInt($(this).attr("x")) < minX) {
          minX = parseInt($(this).attr("x"))
        }
        
      });
            
      // Color the axis. We will change this to give a class, maybe, so 
      // we can control it via CSS
      $("#weight g[clip-path] g rect[width='1'][x='" + minX + "']").attr("fill", "#444444")
      $("#weight g[clip-path] g rect[height='1'][y='" + maxY + "']").attr("fill", "#444444")

      // Slide the horizontal gridlines to the right 1 pixel. We could
      // also shorten the line, but it's not visible in our use case
      // anyway. They were overlapping the y-axis, causing gaps in the line,
      // and z-index has no impact in this situation
      currentX = $("#weight g[clip-path] g rect[height='1'][y!='" + maxY + "']").attr("x");
      $("#weight g[clip-path] g rect[height='1'][y!='" + maxY + "']").attr("x", currentX + 1);
      
    }
    
    function drawBloodPressureChart() { 
      var bloodPressureDataTable = new google.visualization.DataTable();
      bloodPressureDataTable.addColumn({ type: 'date', id: 'Date' });
      bloodPressureDataTable.addColumn({ type: 'number', id: 'Weight', label: "Systolic" });
      bloodPressureDataTable.addColumn({ type: 'number', id: 'Weight', label: "Diastolic" });
      bloodPressureDataTable.addRows([
        [new Date('08/01/2016'),  80, 90],
        [new Date('08/08/2016'),  90, 70],
        [new Date('08/15/2016'),  100, 50],
        [new Date('08/22/2016'),  91, 60],
        [new Date('08/25/2016'),  20, 30]
      ]);
      drawChart("blood_pressure", bloodPressureDataTable);
    }

    function drawChart(element_id, dataTable) {

      var chartWidth = 500;
      var options = {	  
        hAxis: {
          baselineColor: '#FF0000',
          gridlineColor: '#FFF',
          format: 'M.dd.yy'
        },
        vAxis:{
         baselineColor: '#000',
         gridlineColor: '#FFF'
       },
        legend: {
          position: 'top',
          alignment: 'end'
        },
        width: chartWidth,
        height: chartWidth * 0.3,
        chartArea: { 
          top: 30,
          bottom: 50
        },
        pointsVisible: true,
        colors: ['#5A84A2']
      };
      
      var container = document.getElementById(element_id);
      var chart = new google.visualization.LineChart(container);

      chart.draw(dataTable, options);
    }
    
  /*  $(window).load(function() {
      console.log('x');
      $("#weight g").each(function() {
        console.log("y");
      });
      var gs = $("g");
      $("#weight").each(function() {
        console.log("y2");
        console.log($(this));
        $(this).find("g").each(function() {
          console.log("z");
          // `this` is the div
          console.log(this);
        });
      });
    })
    */
  </script>
</head>
<body>
  <h2>Weight</h2>
  <div id="weight"></div>
  <h2>Blood Pressure</h2>
  <div id="blood_pressure"></div>
</body>
</html>
